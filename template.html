<!DOCTYPE html>
<html>
<head>
  <base href="/">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="Biz RCS Generator Sample">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="biz_rcs_tool">

  <!-- Croppie -->
  <link rel="stylesheet" href="croppie/croppie.min.css" />
  <script defer src="croppie/exif.min.js"></script>
  <script src="croppie/croppie.min.js"></script>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>biz_rcs_tool</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">

  <script>
    // The value below is injected by flutter build, do not touch.
    const serviceWorkerVersion = "3199521209";
  </script>
  <script type="text/javascript" src="scripts.js"></script>
  <!-- This script adds the flutter initialization JS code -->
  <script src="flutter.js" defer></script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JHKSP99H1C"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-JHKSP99H1C');
  </script>
</head>
<body>
  <div class="row">
    <div id="web" class="area">
      <h3>Template</h3>
      <div id="button_container">
        <select id="json_select" class="json_button" onchange="readFileToJson(this.value, 'json/template/message')">
          <option value="">메시지 Json 파일 선택</option>
        </select>
        <script>
          const select = document.getElementById('json_select');
          const files = [
            { "displayName": "통합 이미지템플릿M_등록", "filename": "1.json" },
            { "displayName": "통합 이미지템플릿M_조회발송", "filename": "2.json" },
            { "displayName": "통합 정보성템플릿_등록", "filename": "3.json" },
            { "displayName": "통합 정보성템플릿_조회발송", "filename": "4.json" },
            { "displayName": "CLI00001_이미지_아이템상세형_등록", "filename": "5.json" },
            { "displayName": "CLI00001_이미지_아이템상세형_조회발송", "filename": "6.json" },
            { "displayName": "CLL00001_LMS템플릿_명세서_등록", "filename": "7.json" },
            { "displayName": "CLL00001_LMS템플릿_명세서_조회발송", "filename": "8.json" },
            { "displayName": "CLT00001_정보성_아이템강조 스타일_등록", "filename": "9.json" },
            { "displayName": "CLT00001_정보성_아이템강조 스타일_조회발송", "filename": "10.json" },
            { "displayName": "CLT00002_정보성_아이템강조 서술_등록", "filename": "11.json" },
            { "displayName": "CLT00002_정보성_아이템강조 서술_조회발송", "filename": "12.json" },
            { "displayName": "FF001C_정보성_타이틀선택 스타일_등록", "filename": "13.json" },
            { "displayName": "FF001C_정보성_타이틀선택 스타일_조회발송", "filename": "14.json" },
            { "displayName": "FF005D_정보성_타이틀선택 서술_등록", "filename": "15.json" },
            { "displayName": "FF005D_정보성_타이틀선택 서술_조회발송", "filename": "16.json" },
            { "displayName": "ITCRM2_이미지템플릿_슬라이드2_등록", "filename": "17.json" },
            { "displayName": "ITCRM2_이미지템플릿_슬라이드2_조회발송", "filename": "18.json" },
            { "displayName": "TATA001C_정보성_타이틀자유 스타일_등록", "filename": "19.json" },
            { "displayName": "TATA001C_정보성_타이틀자유 스타일_조회발송", "filename": "20.json" },
          ];
          for (const file of files) {
            const option = document.createElement('option');
            option.value = file.filename;
            option.textContent = file.displayName;
            select.appendChild(option);
          }
        </script>
      </div>
      <textarea id="input_json" placeholder="Insert json" class="input_json_class"></textarea>

      <div style="margin-top: 16px;"></div>

      <div id="button_container_form">
        <select id="json_select_form" class="json_button" onchange="readFileToFormJson(this.value, 'json/template/messageForm')">
          <option value="">수정) Json 파일 선택</option>
        </select>
        <script>
          const selectForm = document.getElementById('json_select_form');
          const filesForm = [
            { "displayName": "통합 이미지템플릿M_등록", "filename": "1.json" },
            { "displayName": "통합 정보성템플릿_등록", "filename": "2.json" },
            { "displayName": "CLI00001_이미지_아이템상세형_등록", "filename": "3.json" },
            { "displayName": "CLL00001_LMS템플릿_명세서_등록", "filename": "4.json" },
            { "displayName": "CLT00001_정보성_아이템강조 스타일_등록", "filename": "5.json" },
            { "displayName": "CLT00002_정보성_아이템강조 서술_등록", "filename": "6.json" },
            { "displayName": "FF001C_정보성_타이틀선택 스타일_등록", "filename": "7.json" },
            { "displayName": "FF005D_정보성_타이틀선택 서술_등록", "filename": "8.json" },
            { "displayName": "ITCRM2_이미지템플릿_슬라이드2_등록", "filename": "9.json" },
            { "displayName": "TATA001C_정보성_타이틀자유 스타일_등록", "filename": "10.json" },
          ];
          for (const file of filesForm) {
            const option = document.createElement('option');
            option.value = file.filename;
            option.textContent = file.displayName;
            selectForm.appendChild(option);
          }
        </script>
      </div>
      <textarea id="input_form_json" placeholder="Insert formId json" class="input_json_class"></textarea>

      <div class="inline_block_div">
          <input type="checkbox" id="preview_only" />
          <label for="preview_only">미리보기 전용</label>
      </div>
      <div class="inline_block_div">
          <input type="checkbox" id="input_enable" checked />
          <label for="input_enable">입력 활성화</label>
      </div>

      <div class="color-input-container" style="margin-top: 10px;">
        <input type="text" class="color_select" id="enter-color" placeholder="화면 테마 컬러 (#2F77FB)">
        <input type="color" class="color_select" id="color-picker" value="#2F77FB" />
        <script>
          // color picker
          const colorPicker = document.getElementById('color-picker');
          colorPicker.addEventListener("change", function (event) {
            const enterColor = document.getElementById('enter-color');
            enterColor.value = event.target.value;
          }, false);
        </script>
      </div>
      <div class="color-input-container" style="margin-top: 4px;">
        <input type="text" class="color_select" id="enter-brand-color" placeholder="브랜드 컬러 (#2F77FB)">
        <input type="color" class="color_select" id="brand-color-picker" value="#2F77FB" />
        <script>
          // color picker
          const brandColorPicker = document.getElementById('brand-color-picker');
          brandColorPicker.addEventListener("change", function (event) {
            const enterColor = document.getElementById('enter-brand-color');
            enterColor.value = event.target.value;
          }, false);
        </script>
      </div>

      <textarea id="maap_file_id_url_map" placeholder="MAAP 파일 ID URL JSON" class="input_small_class"></textarea>
      <textarea id="autotext_list" placeholder="insert list [variables]" class="input_small_class">["{{고객명}}", "{{금액}}", "{{날짜}}", "{{변수1}}", "{{변수2}}", "{{변수3}}"]</textarea>

      <div class="file_div">
        <label class="custom-file-upload" for="brand-file-input">
          <span id="brand-file-names">브랜드 로고 불러오기</span>
          <input type="file" id="brand-file-input" style="display: none;" onChange="readMultiFiles(event, 2)" multiple/>
        </label>
        <label class="custom-remove" id="brand-file-remove" onclick="removeFiles(2)">
          <span>제거</span>
        </label>
      </div>

      <input value="화면 만들기" type="button" class="control_input"
             onclick="passToApp(true)">

      <div id="result_popup" class="popup-overlay">
        <div class="popup-content">
          <h4>결과</h4>
          <textarea id="result"></textarea>
          <div class="popup-buttons">
            <button id="copy_button" class="popup-button copy" onclick="copyToClipboard()">복사</button>
            <button id="close_button" class="popup-button close" onclick="closePopup()">닫기</button>
          </div>
        </div>
      </div>
    </div>
    <div id="web_app" class="area">
      <div class="app" id="flutter_app"></div>
    </div>
  </div>
</body>
</html>
